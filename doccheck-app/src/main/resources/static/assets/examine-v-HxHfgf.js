var O=Object.defineProperty,Q=Object.defineProperties;var W=Object.getOwnPropertyDescriptors;var H=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;var R=(s,d,u)=>d in s?O(s,d,{enumerable:!0,configurable:!0,writable:!0,value:u}):s[d]=u,U=(s,d)=>{for(var u in d||(d={}))X.call(d,u)&&R(s,u,d[u]);if(H)for(var u of H(d))Y.call(d,u)&&R(s,u,d[u]);return s},I=(s,d)=>Q(s,W(d));var _=(s,d,u)=>new Promise((v,b)=>{var V=r=>{try{t(u.next(r))}catch(k){b(k)}},N=r=>{try{t(u.throw(r))}catch(k){b(k)}},t=r=>r.done?v(r.value):Promise.resolve(r.value).then(V,N);t((u=u.apply(s,d)).next())});import{q as Z,a as ee,u as ae,d as le}from"./check-Cz-iBMhc.js";import{_ as te}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{o as oe,s as ne,r as g,e as ue,g as z,f as e,w as l,c as i,d as de,h as c,t as se,E as x,v as re}from"./index-B4_lMgQc.js";const ie={class:"main_page"},ce={class:"table-header-container"},me={style:{margin:"20px",height:"20px"}},pe={class:"dialog-footer"},ge={__name:"examine",setup(s){oe(()=>_(this,null,function*(){u(),window.addEventListener("resize",u),h()})),ne(()=>{window.removeEventListener("resize",u)});const d=g(0),u=()=>{const a=window.innerHeight,n=document.querySelector(".table-header-container"),C=n?n.offsetHeight:200,T=50;d.value=a-C-T-250,console.log(d.value,"99999999999999999999")},v=g({ruleName:"",operateUser:""}),b=g("新增查重规则"),V=g({pageNo:1,pageSize:10}),N=g(0),t=g({ruleName:"",content:"",agentUrl:"",agentId:"",agentVersion:"",agentToken:""}),r=g({id:"",ruleName:"",content:"",agentUrl:"",agentId:"",agentVersion:"",agentToken:""}),k=function(){return _(this,null,function*(){if(b.value==="新增查重规则"){const a=yield ee(t.value);console.log(a),a.data.code===200&&(x.success("添加成功"),f.value=!1,h())}else{console.log(I(U({},t.value),{id:r.value.id}),"00000");const a=yield ae(I(U({},t.value),{id:r.value.id}));console.log(a),a.data.code===200&&(x.success("更新成功"),f.value=!1,h())}})},S=a=>{V.value.pageNo=a,h()},B=a=>{V.value.pageSize=a,h()},A=g([]),h=function(){return _(this,null,function*(){const a=yield Z(U(U({},V.value),v.value));a.data.code===200&&(A.value=a.data.data.result,N.value=a.data.data.total)})},f=g(!1),D=()=>{b.value="新增查重规则",t.value={ruleName:"",content:"",agentUrl:"",agentId:"",agentVersion:"",agentToken:""},f.value=!0},L=a=>_(this,null,function*(){re.confirm("确定删除吗？","删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>_(this,null,function*(){$(a)})).catch(()=>{x({type:"info",message:"取消删除"})})}),$=a=>_(this,null,function*(){(yield le(a)).data.code===200&&(x.success("删除成功"),h())}),q=a=>_(this,null,function*(){r.value.id=a.id,t.value.ruleName=a.ruleName,t.value.content=a.content,t.value.agentUrl=a.agentUrl,t.value.agentId=a.agentId,t.value.agentVersion=a.agentVersion,t.value.agentToken=a.agentToken,b.value="编辑查重规则",f.value=!0}),M=()=>{v.value={}},P=()=>{f.value=!1};return(a,n)=>{const C=i("el-breadcrumb-item"),T=i("el-breadcrumb"),y=i("el-input"),m=i("el-form-item"),w=i("el-button"),E=i("el-form"),p=i("el-table-column"),F=i("el-table"),j=i("el-pagination"),G=i("el-card"),J=i("el-dialog");return de(),ue("div",ie,[z("div",ce,[e(T,{separator:"/"},{default:l(()=>[e(C,{to:{path:"/"}},{default:l(()=>[c("首页")]),_:1}),e(C,null,{default:l(()=>[c("规则库管理")]),_:1}),e(C,null,{default:l(()=>[c("审查规则列表")]),_:1})]),_:1})]),e(G,{class:"search-card"},{default:l(()=>[e(E,{inline:!0,model:v.value,class:"demo-form-inline"},{default:l(()=>[e(m,{label:"规则名称"},{default:l(()=>[e(y,{modelValue:v.value.ruleName,"onUpdate:modelValue":n[0]||(n[0]=o=>v.value.ruleName=o),placeholder:"请输入规则名称",clearable:""},null,8,["modelValue"])]),_:1}),e(m,{class:"buttonList"},{default:l(()=>[e(w,{onClick:M},{default:l(()=>[c("重置")]),_:1}),e(w,{type:"primary",onClick:h},{default:l(()=>[c("查询")]),_:1})]),_:1}),e(m,{style:{"margin-left":"auto"}},{default:l(()=>[e(w,{type:"primary",onClick:D},{default:l(()=>[c("新建审查规则")]),_:1})]),_:1})]),_:1},8,["model"]),e(F,{data:A.value,style:{width:"100%"},"show-overflow-tooltip":"",height:d.value},{default:l(()=>[e(p,{label:"序号",width:"90"},{default:l(o=>[c(se(o.$index+1),1)]),_:1}),e(p,{prop:"ruleName",label:"审查规则名称"}),e(p,{prop:"content",label:"审查规则提示词"}),e(p,{prop:"agentUrl",label:"审查智能体API"}),e(p,{prop:"agentId",label:"智能体ID"}),e(p,{prop:"agentVersion",label:"智能体版本"}),e(p,{prop:"agentToken",label:"智能体Token"}),e(p,{prop:"updatedAt",label:"更新时间",formatter:o=>a.$filters.formatTime(o.updatedAt)},null,8,["formatter"]),e(p,{label:"操作",fixed:"right",width:"200"},{default:l(o=>[e(w,{type:"primary",onClick:K=>q(o.row)},{default:l(()=>[c("编辑")]),_:2},1032,["onClick"]),e(w,{type:"danger",onClick:K=>L(o.row.id)},{default:l(()=>[c("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","height"]),z("div",me,[e(j,{style:{float:"right"},background:"",layout:"prev, pager, next",total:N.value,"current-page":V.value.pageNo,"page-size":V.value.pageSize,onCurrentChange:S,onSizeChange:B},null,8,["total","current-page","page-size"])])]),_:1}),e(J,{modelValue:f.value,"onUpdate:modelValue":n[8]||(n[8]=o=>f.value=o),title:b.value,width:600,"before-close":P},{footer:l(()=>[z("div",pe,[e(w,{onClick:n[7]||(n[7]=o=>f.value=!1)},{default:l(()=>[c("取消")]),_:1}),e(w,{type:"primary",onClick:k},{default:l(()=>[c("确定")]),_:1})])]),default:l(()=>[e(E,{model:t.value,"label-width":"auto",style:{margin:"20px auto"}},{default:l(()=>[e(m,{label:"审查规则名称"},{default:l(()=>[e(y,{modelValue:t.value.ruleName,"onUpdate:modelValue":n[1]||(n[1]=o=>t.value.ruleName=o)},null,8,["modelValue"])]),_:1}),e(m,{label:"审查规则提示词"},{default:l(()=>[e(y,{modelValue:t.value.content,"onUpdate:modelValue":n[2]||(n[2]=o=>t.value.content=o),type:"textarea",rows:10},null,8,["modelValue"])]),_:1}),e(m,{label:"审查智能体API"},{default:l(()=>[e(y,{modelValue:t.value.agentUrl,"onUpdate:modelValue":n[3]||(n[3]=o=>t.value.agentUrl=o)},null,8,["modelValue"])]),_:1}),e(m,{label:"智能体ID"},{default:l(()=>[e(y,{modelValue:t.value.agentId,"onUpdate:modelValue":n[4]||(n[4]=o=>t.value.agentId=o)},null,8,["modelValue"])]),_:1}),e(m,{label:"智能体版本"},{default:l(()=>[e(y,{modelValue:t.value.agentVersion,"onUpdate:modelValue":n[5]||(n[5]=o=>t.value.agentVersion=o)},null,8,["modelValue"])]),_:1}),e(m,{label:"智能体Token"},{default:l(()=>[e(y,{modelValue:t.value.agentToken,"onUpdate:modelValue":n[6]||(n[6]=o=>t.value.agentToken=o)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},Ve=te(ge,[["__scopeId","data-v-de88c971"]]);export{Ve as default};
