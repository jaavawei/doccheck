var O=Object.defineProperty,Q=Object.defineProperties;var W=Object.getOwnPropertyDescriptors;var A=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;var E=(r,d,u)=>d in r?O(r,d,{enumerable:!0,configurable:!0,writable:!0,value:u}):r[d]=u,S=(r,d)=>{for(var u in d||(d={}))X.call(d,u)&&E(r,u,d[u]);if(A)for(var u of A(d))Y.call(d,u)&&E(r,u,d[u]);return r},H=(r,d)=>Q(r,W(d));var h=(r,d,u)=>new Promise((v,b)=>{var a=m=>{try{N(u.next(m))}catch(k){b(k)}},T=m=>{try{N(u.throw(m))}catch(k){b(k)}},N=m=>m.done?v(m.value):Promise.resolve(m.value).then(a,T);N((u=u.apply(r,d)).next())});import{q as Z,a as ee,u as ae,d as le}from"./rule-CiGaHraX.js";import{_ as te}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{o as oe,s as ne,r as g,e as ue,g as I,f as e,w as t,c as s,d as de,h as i,t as re,E as U,v as se}from"./index-B4_lMgQc.js";const ie={class:"main_page"},me={class:"table-header-container"},pe={style:{margin:"20px",height:"20px"}},ce={class:"dialog-footer"},ge={__name:"extract",setup(r){oe(()=>h(this,null,function*(){u(),window.addEventListener("resize",u),V()})),ne(()=>{window.removeEventListener("resize",u)});const d=g(0),u=()=>{const l=window.innerHeight,n=document.querySelector(".table-header-container"),C=n?n.offsetHeight:200,x=50;d.value=l-C-x-250},v=g({ruleName:"",operateUser:""}),b=g("添加提取规则"),a=g({ruleName:"",elements:"",agentUrl:"",prompt:"",agentId:"",agentVersion:"",agentToken:""}),T=g({id:"",ruleName:"",elements:"",agentUrl:"",prompt:"",agentId:"",agentVersion:"",agentToken:""});g(null);const N=function(){return h(this,null,function*(){if(b.value==="添加提取规则"){const l=yield ee(a.value);l.data.code===200?(U.success("添加成功"),f.value=!1,V()):U.error(l.data.data)}else{const l=yield ae({id:T.value.id,ruleName:a.value.ruleName,prompt:a.value.prompt,elements:a.value.elements,agentUrl:a.value.agentUrl,agentId:a.value.agentId,agentVersion:a.value.agentVersion,agentToken:a.value.agentToken});console.log(l),l.data.code===200?(U.success("更新成功"),f.value=!1,V()):U.error(l.data.data)}})},m=g([]),k=g(0),w=g({pageNo:1,pageSize:10}),R=l=>{w.value.pageNo=l,V()},B=l=>{w.value.pageSize=l,V()},V=function(){return h(this,null,function*(){const l=yield Z(H(S({},w.value),{ruleName:v.value.ruleName,operateUser:v.value.operateUser}));l.data.code===200&&(m.value=l.data.data.result,k.value=l.data.data.total)})},D=l=>{T.value.id=l.id,a.value.ruleName=l.ruleName,a.value.elements=l.elements,a.value.prompt=l.prompt,a.value.agentUrl=l.agentUrl,a.value.agentId=l.agentId,a.value.agentVersion=l.agentVersion,a.value.agentToken=l.agentToken,b.value="编辑提取规则",f.value=!0},f=g(!1),L=()=>{b.value="添加提取规则",a.value={ruleName:"",elements:"",agentUrl:"",prompt:"",agentId:"",agentVersion:"",agentToken:""},f.value=!0},$=l=>h(this,null,function*(){se.confirm("确认删除吗？","删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>h(this,null,function*(){q(l)})).catch(()=>{U({type:"info",message:"取消删除"})})}),q=l=>h(this,null,function*(){(yield le(l)).data.code===200&&(U.success("删除成功"),V())}),M=()=>{f.value=!1},P=()=>{v.value={}};return(l,n)=>{const C=s("el-breadcrumb-item"),x=s("el-breadcrumb"),_=s("el-input"),p=s("el-form-item"),y=s("el-button"),z=s("el-form"),c=s("el-table-column"),F=s("el-table"),j=s("el-pagination"),G=s("el-card"),J=s("el-dialog");return de(),ue("div",ie,[I("div",me,[e(x,{separator:"/"},{default:t(()=>[e(C,{to:{path:"/"}},{default:t(()=>[i("首页")]),_:1}),e(C,null,{default:t(()=>[i("规则库管理")]),_:1}),e(C,null,{default:t(()=>[i("提取规则配置")]),_:1})]),_:1})]),e(G,{class:"search-card"},{default:t(()=>[e(z,{inline:!0,model:v.value,class:"demo-form-inline"},{default:t(()=>[e(p,{label:"规则名称"},{default:t(()=>[e(_,{modelValue:v.value.ruleName,"onUpdate:modelValue":n[0]||(n[0]=o=>v.value.ruleName=o),placeholder:"请输入规则名称",clearable:""},null,8,["modelValue"])]),_:1}),e(p,{class:"buttonList"},{default:t(()=>[e(y,{onClick:P},{default:t(()=>[i("重置")]),_:1}),e(y,{type:"primary",onClick:V},{default:t(()=>[i("查询")]),_:1})]),_:1}),e(p,{style:{"margin-left":"auto"}},{default:t(()=>[e(y,{type:"primary",onClick:L},{default:t(()=>[i("新建提取规则")]),_:1})]),_:1})]),_:1},8,["model"]),e(F,{data:m.value,"show-overflow-tooltip":"","tooltip-effect":"myStyle",style:{width:"100%"},height:d.value},{default:t(()=>[e(c,{label:"序号",width:"90"},{default:t(o=>[i(re(o.$index+1),1)]),_:1}),e(c,{prop:"ruleName",label:"提取规则名称"}),e(c,{prop:"elements",label:"提取规则要素"}),e(c,{prop:"prompt",label:"提取规则提示词"}),e(c,{prop:"agentUrl",label:"提取智能体API"}),e(c,{prop:"agentId",label:"智能体ID"}),e(c,{prop:"agentVersion",label:"智能体版本"}),e(c,{prop:"agentToken",label:"智能体Token"}),e(c,{prop:"updatedAt",label:"操作时间",formatter:o=>l.$filters.formatTime(o.updatedAt)},null,8,["formatter"]),e(c,{label:"操作",fixed:"right",width:"200"},{default:t(o=>[e(y,{type:"primary",onClick:K=>D(o.row)},{default:t(()=>[i("编辑")]),_:2},1032,["onClick"]),e(y,{type:"danger",onClick:K=>$(o.row.id)},{default:t(()=>[i("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","height"]),I("div",pe,[e(j,{style:{float:"right"},background:"",layout:"prev, pager, next",total:k.value,"current-page":w.value.pageNo,"page-size":w.value.pageSize,onCurrentChange:R,onSizeChange:B},null,8,["total","current-page","page-size"])])]),_:1}),e(J,{modelValue:f.value,"onUpdate:modelValue":n[9]||(n[9]=o=>f.value=o),title:b.value,width:600,"before-close":M},{footer:t(()=>[I("div",ce,[e(y,{onClick:n[8]||(n[8]=o=>f.value=!1)},{default:t(()=>[i("取消")]),_:1}),e(y,{type:"primary",onClick:N},{default:t(()=>[i("确定")]),_:1})])]),default:t(()=>[e(z,{model:a.value,"label-width":"auto",style:{margin:"10px auto"}},{default:t(()=>[e(p,{label:"规则名称"},{default:t(()=>[e(_,{modelValue:a.value.ruleName,"onUpdate:modelValue":n[1]||(n[1]=o=>a.value.ruleName=o)},null,8,["modelValue"])]),_:1}),e(p,{label:"提取规则要素 (逗号分隔)"},{default:t(()=>[e(_,{modelValue:a.value.elements,"onUpdate:modelValue":n[2]||(n[2]=o=>a.value.elements=o)},null,8,["modelValue"])]),_:1}),e(p,{label:"提取规则提示词"},{default:t(()=>[e(_,{type:"textarea",modelValue:a.value.prompt,"onUpdate:modelValue":n[3]||(n[3]=o=>a.value.prompt=o),rows:10},null,8,["modelValue"])]),_:1}),e(p,{label:"提取智能体API"},{default:t(()=>[e(_,{modelValue:a.value.agentUrl,"onUpdate:modelValue":n[4]||(n[4]=o=>a.value.agentUrl=o)},null,8,["modelValue"])]),_:1}),e(p,{label:"智能体ID"},{default:t(()=>[e(_,{modelValue:a.value.agentId,"onUpdate:modelValue":n[5]||(n[5]=o=>a.value.agentId=o)},null,8,["modelValue"])]),_:1}),e(p,{label:"智能体版本"},{default:t(()=>[e(_,{modelValue:a.value.agentVersion,"onUpdate:modelValue":n[6]||(n[6]=o=>a.value.agentVersion=o)},null,8,["modelValue"])]),_:1}),e(p,{label:"智能体Token"},{default:t(()=>[e(_,{modelValue:a.value.agentToken,"onUpdate:modelValue":n[7]||(n[7]=o=>a.value.agentToken=o)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},Ve=te(ge,[["__scopeId","data-v-1ba67c85"]]);export{Ve as default};
